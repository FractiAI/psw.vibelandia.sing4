<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Checkout | Vibelandia Reno</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 2rem;
        }
        .container { max-width: 800px; margin: 0 auto; }
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .header h1 {
            font-size: 2rem;
            background: linear-gradient(135deg, #8a2be2, #1e90ff, #00bfff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }
        .plan-details {
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .plan-details h2 { color: #00d4ff; margin-bottom: 1rem; }
        .plan-details p { color: #aaa; margin-bottom: 0.5rem; }
        .price { font-size: 2rem; color: #7fff7f; font-weight: bold; margin: 1rem 0; }
        .paypal-container {
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
        }
        .sandbox-badge {
            display: inline-block;
            padding: 6px 14px;
            background: rgba(255,165,0,0.2);
            border: 1px solid rgba(255,165,0,0.4);
            border-radius: 20px;
            font-size: 0.85rem;
            color: #ffa500;
            margin-bottom: 1rem;
        }
        .contact-required {
            background: rgba(138,43,226,0.2);
            border: 1px solid rgba(138,43,226,0.5);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
        }
        .contact-required h3 { color: #8a2be2; margin-bottom: 1rem; }
        .contact-required a {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #8a2be2, #1e90ff);
            color: #fff;
            text-decoration: none;
            border-radius: 8px;
            margin-top: 1rem;
        }
        .buy-snap-cta {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #7fff7f, #00bfff);
            color: #000;
            font-weight: 700;
            text-decoration: none;
            border-radius: 8px;
            margin-top: 0.5rem;
        }
        .bbhe-snap-badge {
            display: inline-block;
            padding: 8px 16px;
            background: rgba(0,0,0,0.6);
            border: 2px solid #ffeaa7;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #ffeaa7;
            font-weight: 700;
            margin: 0.5rem 0;
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.02); }
        }
        .back-link {
            display: inline-block;
            margin-top: 2rem;
            color: #00bfff;
            text-decoration: none;
        }
        .api-note {
            font-size: 0.85rem;
            color: #666;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Vibelandia Payment</h1>
            <p>Mark Twain's Post-Singularity Vibelandia Reno</p>
        </header>

        <div id="plan-details" class="plan-details">
            <!-- Plan details loaded here -->
        </div>

        <div id="payment-container" class="paypal-container">
            <!-- PayPal button or contact CTA loaded here -->
        </div>

        <p class="api-note">Payment is handled by the Syntheverse Cloud Onramp API (Octave 2). NSPFRNP. <strong>BUY!</strong> ‚Äî Immediate revenue. Immediate viral revenue. <strong>VIBE!</strong> ¬∑ <strong>‚ö´ BBHE SNAP</strong> ‚Äî The energy is pulling. Buy now. <strong>üîë GOLDEN FRACTAL KEY!</strong> ‚Äî Unlocks Everything. Sent on purchase and activation.</p>
        <p class="api-note"><strong>First 1,000 Pioneers:</strong> 50% off applicable campus and WINK! plans. Pioneer Status on-chain forever. Contact <a href="mailto:info@fractiai.com?subject=Pioneer%20Registration%20-%2050%25%20Discount">info@fractiai.com</a> to register and apply.</p>
        <p class="api-note" style="color: #4ecdc4; margin-top: 1rem;"><strong>MCA! ‚Üí ‚àû¬≥</strong> (Metabolize ‚Üí Crystallize ‚Üí Animate)</p>
        <p class="api-note" style="color: #aaa; font-size: 0.9rem; margin-top: 0.5rem;">Gianni Versace‚Äìinspired wrapper on all skins, touchpoints & experiences.</p>
        <p class="api-note" style="color: #888; font-size: 0.8rem; margin-top: 0.5rem;">SNAP nspfrnp ‚Äî Pre-singularity copyrights always respected.</p>
        <a href="/" class="back-link">‚Üê Back to Vibelandia</a>
    </div>

    <script>
        // Octave 2 API base ‚Äî payment handled by repository: Syntheverse 7 Octave 2-3 Public Cloud Onramp
        const PAYMENT_API_BASE = 'https://syntheverse-poc.vercel.app';

        const urlParams = new URLSearchParams(window.location.search);
        const planId = urlParams.get('plan') || 'campus-day';

        const plans = {
            'campus-day': { name: 'Day Pass', price: 4999, description: 'Experience the campus for a day - Premium pricing for high-value vibers worldwide' },
            'campus-weekly': { name: 'Weekly Pass', price: 29999, description: 'Full week campus experience - For top artists, performers, entrepreneurs' },
            'campus-monthly': { name: 'Monthly Pass', price: 99999, description: 'Complete campus integration - For high-value creators' },
            'campus-ultimate-vip': { name: 'Ultimate VIP Campus', price: 499999, description: 'Ultimate premium campus experience - For Ultimate C\'s' },
            'wink-base': { name: 'WINK! Base', price: 1999, description: 'Essential WINK! features for high-value vibers' },
            'wink-standard': { name: 'WINK! Standard', price: 4999, description: 'Standard Wink experience, Notes Being' },
            'wink-premium': { name: 'WINK! Premium', price: 19999, description: 'Premium profile, magical wardrobe' },
            'wink-4x4-ultimate': { name: 'WINK! 4√ó4 Ultimate', price: 49999, description: 'Ultimate tier‚Äîeverything included for Ultimate C\'s' },
            'sing-base': { name: 'SING Base Model', price: 20000, description: '~$20K (VW Bug pricing)' },
            'sing-members-only': { name: 'SING Members Only', price: 75000, description: 'Scaling from base ‚Äî $75K' },
            'sing-ultimate-vip': { name: 'SING Ultimate VIP', price: 200000, description: '~$200K+ (top super car)' },
            'sing-baller-c': { name: 'SING Baller C Ultimate VIP', price: 500000, description: 'Ultimate ‚Äî $500K' },
            'experience-visit': { name: 'Visit', price: 0, description: 'Come for the post-singularity business ‚Äî Free' },
            'experience-stay': { name: 'Stay', price: 0, description: 'Stay for the post-singularity fun ‚Äî Free' },
            'experience-create': { name: 'Create', price: 0, description: 'Creator studios, performance venues ‚Äî Free' },
            'experience-transform': { name: 'Transform', price: 0, description: 'Happy Ending Zones, SING lottery ‚Äî Free' },
            'dispensary-base': { name: 'DISPENSARY! SNAP Base', price: 9999, description: 'Menu of buzzes - Base tier - Goldilocks auto-lock for Creator/Chairman Commander/Performer Superhero modes' },
            'dispensary-standard': { name: 'DISPENSARY! SNAP Standard', price: 24999, description: 'Menu of buzzes - Standard tier - All biological channels - Mode combinations' },
            'dispensary-premium': { name: 'DISPENSARY! SNAP Premium', price: 99999, description: 'Menu of buzzes - Premium tier - Full channel access - Advanced Goldilocks' },
            'dispensary-ultimate': { name: 'DISPENSARY! SNAP Ultimate', price: 299999, description: 'Menu of buzzes - Ultimate tier - Complete access - All modes - For Ultimate C\'s' }
        };

        const plan = plans[planId] || plans['campus-day'];

        document.getElementById('plan-details').innerHTML = `
            <h2>${plan.name}</h2>
            <p>${plan.description}</p>
            ${plan.price > 0 ? `<div class="price">$${plan.price.toLocaleString()}</div>` : ''}
            ${plan.price > 0 ? `<div style="margin-top:1rem; padding:1rem; background:rgba(0,0,0,0.3); border:2px solid rgba(255,255,255,0.2); border-radius:12px; text-align:center;"><p style="color:#ffeaa7; font-weight:600; font-size:1.1rem; margin-bottom:0.5rem;">VIBE! ¬∑ ‚ö´ BBHE SNAP ‚Äî DISPENSARY! SNAP ‚Äî The energy is pulling. BUY! now.</p><p style="color:#ccc; font-size:0.95rem;">${planId.startsWith('dispensary') ? 'Menu of buzzes across all biological channels. Goldilocks auto-lock for mode combinations. ' : ''}BBHE 5% Intox % unlocks on purchase. Immediate intoxicating effects. Magnified with +1 reading glasses.</p></div>` : ''}
        `;

        if (plan.price === 0) {
            document.getElementById('payment-container').innerHTML = `
                <div class="contact-required">
                    <div class="price" style="color:#7fff7f;">Free</div>
                    <h3>‚ö´ BBHE SNAP ‚Äî BUY! Add-On</h3>
                    <p><strong>${plan.name}</strong> ‚Äî ${plan.description}. Immediate revenue. <strong>‚ö´ BBHE SNAP</strong> ‚Äî The energy is pulling. BUY! a campus pass or SYNTH for full access.</p>
                    <a href="payment-checkout.html?plan=campus-day" class="buy-snap-cta">‚ö´ BBHE SNAP ‚Äî BUY! Day Pass $4,999 ‚Üí</a>
                    <a href="payment-checkout.html?plan=sing-base" class="buy-snap-cta" style="margin-left:0.5rem;">‚ö´ BBHE SNAP ‚Äî BUY! SYNTH ‚Üí</a>
                </div>
            `;
        } else {
            // Payment handled by API call to Octave 2 (Syntheverse repository)
            async function initPayPal() {
                let clientId = '';
                try {
                    const configRes = await fetch(PAYMENT_API_BASE + '/api/payment/paypal/config');
                    if (configRes.ok) {
                        const config = await configRes.json();
                        clientId = config.clientId || '';
                    }
                } catch (e) {
                    console.warn('PayPal config from API unavailable, showing sandbox instructions', e);
                }
                if (!clientId) {
                    document.getElementById('payment-container').innerHTML = `
                        <div class="sandbox-badge">LIVE ‚Äî SANDBOX MODE</div>
                        <div style="margin-top:1rem; padding:1rem; background:rgba(0,0,0,0.4); border:2px solid rgba(255,255,255,0.3); border-radius:12px; text-align:center;">
                            <p style="color:#ffeaa7; font-weight:700; font-size:1.2rem; margin-bottom:0.75rem;">‚ö´ BBHE SNAP ‚Äî BUY! NOW</p>
                            <p style="color:#fff; margin-bottom:0.5rem;">BBHE intoxicating effects activate on purchase. Immediate access.</p>
                            <p style="color:#7fff7f; font-size:0.95rem; margin-bottom:1rem;">5 BBHE Intox % available now. Magnified with purchase.</p>
                        </div>
                        <p style="margin-top:1rem;">PayPal is configured via the Syntheverse Cloud Onramp API. Create order and capture:</p>
                        <p style="margin-top:0.5rem; font-family:monospace; font-size:0.9rem;">POST ${PAYMENT_API_BASE}/api/payment/paypal/create-order</p>
                        <p style="font-family:monospace; font-size:0.9rem;">POST ${PAYMENT_API_BASE}/api/payment/paypal/capture-order</p>
                        <p style="margin-top:1rem;">To complete payment for <strong>${plan.name}</strong> ($${plan.price.toLocaleString()}): configure PayPal in the Cloud Onramp, or email <a href="mailto:info@fractiai.com?subject=Vibelandia%20${encodeURIComponent(plan.name)}%20Payment">info@fractiai.com</a> to arrange.</p>
                    `;
                    return;
                }
                const script = document.createElement('script');
                script.src = 'https://www.paypal.com/sdk/js?client-id=' + clientId + '&currency=USD';
                script.onload = function() {
                    const isSandbox = window.location.hostname.includes('localhost') || window.location.hostname.includes('vercel.app');
                    let html = '';
                    if (isSandbox) html += '<div class="sandbox-badge">SANDBOX MODE</div>';
                    html += '<div style="margin-bottom:1.5rem; padding:1rem; background:rgba(0,0,0,0.4); border:2px solid rgba(255,255,255,0.3); border-radius:12px; text-align:center;"><p style="color:#ffeaa7; font-weight:700; font-size:1.2rem; margin-bottom:0.5rem;">‚ö´ BBHE SNAP ‚Äî BUY! NOW</p><p style="color:#fff; font-size:0.95rem; margin-bottom:0.25rem;">BBHE intoxicating effects activate on purchase. Immediate access.</p><p style="color:#7fff7f; font-size:0.9rem;">5 BBHE Intox % available now. Magnified with purchase.</p></div>';
                    html += '<div id="paypal-button-container"></div>';
                    document.getElementById('payment-container').innerHTML = html;

                    paypal.Buttons({
                        createOrder: function(data, actions) {
                            return fetch(PAYMENT_API_BASE + '/api/payment/paypal/create-order', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({ planId, amount: plan.price, currency: 'USD', description: plan.name })
                            }).then(function(res) { return res.json(); }).then(function(data) {
                                return data.orderId || data.id;
                            });
                        },
                        onApprove: function(data) {
                            return fetch(PAYMENT_API_BASE + '/api/payment/paypal/capture-order', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({ orderId: data.orderID, payerId: data.payerID })
                            }).then(function(res) { return res.json(); }).then(function(result) {
                                if (result.success !== false) {
                                    window.location.href = 'payment-success.html?orderId=' + encodeURIComponent(data.orderID) + '&planId=' + encodeURIComponent(planId);
                                } else {
                                    window.location.href = 'payment-error.html?error=' + encodeURIComponent(result.error || 'Capture failed');
                                }
                            });
                        },
                        onError: function(err) {
                            window.location.href = 'payment-error.html?error=' + encodeURIComponent(err.message || 'Payment error');
                        }
                    }).render('#paypal-button-container');
                };
                document.head.appendChild(script);
            }
            initPayPal();
        }
    </script>
</body>
</html>
